<odoo>
    <record id="stock_move_line_consignation_report_tree" model="ir.ui.view">
        <field name="name">stock.move.line.consignation.report.tree</field>
        <field name="model">stock.move.line</field>
        <field name="arch" type="xml">
            <tree string="Consignation Report" create="0" edit="0">
                <field name="date" string="Date"/>
                <!-- <field name="picking_id.guide_number" string="Dispatch Guide"/> -->
                <!-- <field name="location_dest_id.partner_id" string="Customer"/> -->
                <field name="product_id" string="Product"/>
                <field name="product_uom_id" string="Unit of Measure"/>
                <field name="qty_done" string="Quantity Dispatched"/>
                <field name="qty_invoiced" string="Quantity Invoiced"/>
            </tree>
        </field>
    </record>
    <record id="action_stock_move_line_consignation_report" model="ir.actions.act_window">
        <field name="name">Consignation Report</field>
        <field name="res_model">stock.move.line</field>
        <field name="type">ir.actions.act_window</field>
        <field name="view_mode">tree"</field>
        <field 
            name="view_ids" 
            eval="[
                (5, 0, 0), 
                (0, 0, {'view_mode': 'tree', 'view_id': ref('stock_move_line_consignation_report_tree')}),
            ]"
        />
        <field name="context">{'search_default_state_done': 1}</field>
        <field name="domain">
            [
                ('picking_id.state', '=', 'done'),
                ('picking_id.picking_type_id.warehouse_id.is_consignation_warehouse', '=', True)
            ]
        </field>
    </record>
</odoo>